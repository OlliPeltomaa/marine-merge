var t=Object.defineProperty,e=(e,s,i)=>((e,s,i)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i)(e,"symbol"!=typeof s?s+"":s,i);import{p as s}from"./phaser-nUMyL2sp.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const i="#00c5ff",h={purpleFish:{scale:1,next:"yellowFish",rarity:.5,points:0},yellowFish:{scale:1,next:"blueFish",rarity:.7,points:2},blueFish:{scale:1.15,next:"greenFish",rarity:.8,points:4},greenFish:{scale:1.25,next:"redFish",rarity:.9,points:6},redFish:{scale:1.3,next:"grayFish",rarity:.95,points:8},grayFish:{scale:1.5,next:"blowFish",rarity:.975,points:10},blowFish:{scale:1.6,next:void 0,rarity:1,points:12}};class a extends Phaser.Physics.Matter.Image{constructor(t,e,s,i){const a=t.scene.cache.json.get(`${i}Shape`);super(t,e,s,i,void 0,{shape:a}),this.setScale(h[i].scale),t.scene.add.existing(this)}}class o extends Phaser.GameObjects.Container{constructor(t,s,i,h,a,o,n,r){super(t,s,i),e(this,"image"),e(this,"text"),t.add.existing(this),this.image=this.createImage(h,a,o,s,i),this.text=this.createText(n,s,i),this.image.on("pointerover",(()=>{this.image.displayWidth*=1.05,this.image.displayHeight*=1.05,this.text.displayHeight*=1.05,this.text.displayWidth*=1.05})),this.image.on("pointerout",(()=>{this.image.displayWidth/=1.05,this.image.displayHeight/=1.05,this.text.displayHeight/=1.05,this.text.displayWidth/=1.05})),this.image.on("pointerdown",r)}createImage(t,e,s,i,h){const a=this.scene.add.image(i,h,s);return a.setInteractive(),a.displayWidth=t,a.displayHeight=e,a.y=h+a.height/2,a}createText(t,e,s){const i=this.scene.add.text(e,s,t,{fontFamily:"Arial Black, Gadget, sans-serif",fontSize:38,color:"#ffffff",stroke:"#350f61",strokeThickness:8,align:"center"}).setOrigin(.5);return i.y=s+i.height/2,i}}const n=t=>{const e=Object.entries(h);for(let s=0;s<e.length;s++)if(t<=e[s][1].rarity)return e[s][0];return e[0][0]};class r extends s.Scene{constructor(){super("Game"),e(this,"walls"),e(this,"fish"),e(this,"score"),e(this,"scoreText"),e(this,"homeButton")}isValidX(t,e){return e>this.walls.getLeftCenter().x+t.width/2&&e<this.walls.getRightCenter().x-t.width/2}gameOver(){this.input.off("pointermove"),this.input.off("pointerup"),this.homeButton.setInteractive(!1),this.scene.launch("GameOver",{score:this.score})}updateScore(t){this.score+=t,this.scoreText.setText(`Score: ${this.score}`)}mergeFish(t,e){const s=t.x,i=t.y,o=t.rotation,n=h[t.texture.key].next;if(n){e.destroy(),t.destroy();const r=new a(this.matter.world,s,i,n);r.setRotation(o),this.updateScore(h[r.texture.key].points),this.sound.play("pop")}}create(){const t=this.cache.json.get("wall-shape");this.walls=this.matter.add.image(this.scale.width/2,0,"walls",void 0,{shape:t,isStatic:!0}),this.walls.displayHeight=.7*this.scale.height,this.walls.displayWidth=.7*this.scale.width,this.walls.y=this.scale.height-this.walls.displayHeight/2,this.score=0,this.scoreText=this.add.text(this.scale.width/2,20,"Score: 0",{fontSize:"32px",color:"#ffffff",fontFamily:"Arial Black, Gadget, sans-serif",stroke:"#350f61",strokeThickness:8,align:"center"}),this.scoreText.setOrigin(.5),this.homeButton=new o(this,this.scale.width-70,0,70,70,"homeButton","",(()=>{this.scene.start("MainMenu")})),this.fish=new a(this.matter.world,this.scale.width/2,this.walls.getTopCenter().y-50,n(Math.random())),this.fish.setStatic(!0),this.input.on("pointermove",(t=>{this.fish&&t.isDown&&this.isValidX(this.fish,t.position.x)&&this.fish.setPosition(t.x,this.fish.y)})),this.input.on("pointerup",(t=>{this.fish&&(this.isValidX(this.fish,t.position.x)&&this.fish.setPosition(t.x,this.fish.y),this.fish.setStatic(!1),this.fish=void 0,this.time.delayedCall(1e3,(()=>{this.fish=new a(this.matter.world,this.scale.width/2,this.walls.getTopCenter().y-50,n(Math.random())),this.fish.setStatic(!0),this.add.existing(this.fish)})))})),this.matter.world.on("collisionstart",(t=>{t.pairs.forEach((t=>{const{bodyA:e,bodyB:s}=t,i=e.gameObject,h=s.gameObject;i!==this.fish&&h!==this.fish||this.gameOver(),i instanceof a&&h instanceof a&&i.body&&h.body&&i.texture.key===h.texture.key&&this.mergeFish(i,h)}))}))}}class l extends s.Scene{constructor(){super("GameOver"),e(this,"background"),e(this,"homeButton"),e(this,"retryButton"),e(this,"finalScore",0),e(this,"headerText"),e(this,"text")}init(t){t.score?this.finalScore=t.score:this.finalScore=0}create(){this.background=this.add.image(this.scale.width/2,this.scale.height/2,"modal"),this.background.displayWidth=.9*this.scale.width,this.background.displayHeight=.9*this.scale.width,this.headerText=this.add.text(this.scale.width/2,this.background.getTopCenter().y+70,"Game Over",{fontFamily:"Arial Black, Gadget, sans-serif",fontSize:32,color:"#ffffff",stroke:"#350f61",strokeThickness:8,align:"center"}),this.headerText.setOrigin(.5),this.text=this.add.text(this.scale.width/2,this.headerText.y+100,`Final Score: ${this.finalScore}`,{fontFamily:"Arial Black, Gadget, sans-serif",fontSize:24,color:"#ffffff",stroke:"#350f61",strokeThickness:5,align:"center"}).setOrigin(.5),this.homeButton=new o(this,this.scale.width/2-100,this.scale.height/2,100,100,"homeButton","",(()=>{this.scene.stop("Game"),this.scene.start("MainMenu")})),this.retryButton=new o(this,this.scale.width/2+100,this.scale.height/2,100,100,"retryButton","",(()=>{this.scene.start("Game")}))}}class c extends s.Scene{constructor(){super("MainMenu"),e(this,"logo"),e(this,"buttonText"),e(this,"startButton")}create(){this.add.particles(0,this.scale.height+50,"bubble",{x:{min:10,max:this.scale.width-10},quantity:1,lifespan:5e3,gravityY:-100,frequency:300}),this.logo=this.add.image(this.scale.width/2,0,"logo"),this.logo.y=this.logo.height/2+20,this.startButton=new o(this,this.scale.width/2,this.scale.height/2,300,100,"startButton","Play",(()=>{this.scene.start("Game")}))}}class d extends s.Scene{constructor(){super("Preloader")}init(){const t=document.getElementById("body");t&&(t.style.backgroundColor=i);const e=document.getElementById("background");e&&(e.style.display="block")}preload(){this.load.setPath("assets"),this.load.image("logo","images/logo.png"),this.load.image("startButton","images/button_rectangle_depth_gradient.png"),this.load.image("bubble","images/bubble.png"),this.load.image("homeButton","images/home-button.png"),this.load.image("retryButton","images/retry-button.png"),this.load.image("modal","images/button_square_flat.png"),this.load.image("walls","images/walls.png"),this.load.json("wall-shape","shapes/wall-shape.json"),this.load.image("purpleFish","images/purple-fish.png"),this.load.json("purpleFishShape","shapes/purpleFish-shape.json"),this.load.image("blueFish","images/blue-fish.png"),this.load.json("blueFishShape","shapes/blueFish-shape.json"),this.load.image("yellowFish","images/yellow-fish.png"),this.load.json("yellowFishShape","shapes/yellowFish-shape.json"),this.load.image("greenFish","images/green-fish.png"),this.load.json("greenFishShape","shapes/greenFish-shape.json"),this.load.image("redFish","images/red-fish.png"),this.load.json("redFishShape","shapes/redFish-shape.json"),this.load.image("grayFish","images/gray-fish.png"),this.load.json("grayFishShape","shapes/grayFish-shape.json"),this.load.image("blowFish","images/blow-fish.png"),this.load.json("blowFishShape","shapes/blowFish-shape.json"),this.load.audio("pop","audio/pop.wav")}create(){this.scene.start("MainMenu")}}const g={type:Phaser.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:i,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:640,height:960,min:{width:320,height:480},max:{width:1400,height:1200}},physics:{default:"matter",matter:{debug:!1,gravity:{y:1,x:0}}},scene:[d,c,r,l]};new s.Game(g);
